<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script type="importmap">
      {
        "imports": {
          "react": "https://esm.sh/react?dev",
          "react-dom/client": "https://esm.sh/react-dom/client?dev"
        }
      }
    </script>
    <script
      type="text/babel"
      data-type="module"
      src="updatin arrays.jsx"
    ></script>
    <title>Updating arrays in States</title>
  </head>
  <body>
    <h1>Updating arrays in state</h1>
    <p>
      Arrays are mutable in JS, but again, in JS, it should be treated as
      immutable. Similar to objects, a new one is needed for replacing the older
      ones if an update is needed.
    </p>
    <h2>Updating arrays without mutation</h2>
    <p>
      In JS, arrays is simply another type of object. It should be treated as
      read-only like the objects in React, meaning re-assignment like
      <code>arr[0]= 'reassigned stuff'</code> should not be done. Methods like
      <code>push()</code> and <code>pop()</code> leading to mutation should also
      be forbiddened.
    </p>
    <h2>Adding to array</h2>
    <p>
      To update a array, we can create a new array that contains all the
      information from previous array and add a new item at the end. Again, we
      can use the <code>spread</code> syntax <code>...</code>
    </p>
    <pre>
      setPeople{
        [
          ...People,
          {id: Id++, name:zhuolin}
        ]
      }
    </pre>
    <p></p>
    <div id="listAppend"></div>
    <h2>Remove from array</h2>
    <p>
      We can remove a item from an array using the <code>filter</code> method to
      create a new list without the item
    </p>
    <div id="listRemove"></div>
    <pre>
      function ListRemove() {
        let initialStudent = [
          { id: 0, name: "chalin" },
          { id: 1, name: "WILL" },
          { id: 2, name: "jim" },
        ];
        const [students, setStudents] = useState(initialStudent);
        return (
          &lt;&gt;
            &lt;h3&gt;Inspiring students: &lt;/h3&gt;
            &lt;ul&gt;
              {students.map((student) =&gt; (
                &lt;li key={student.id}&gt;
                  {student.name + " "}
                  &lt;button
                    onClick={() =&gt; {
                      setStudents(students.filter((e) =&gt; e.id !== student.id));
                    }}
                  &gt;
                    delete
                  &lt;/button&gt;
                &lt;/li&gt;
              ))}
            &lt;/ul&gt;
          &lt;/&gt;
        );
      }
    </pre>
    <p>
      This is a relatively simple task, we can use map to create the list and
      button while deploying the event handler. The
      <code>setStudent(student.filter(e => e.id !== student.id))</code> here
      means creating an new arraoy that consists of those students ID that are
      different from the clicked one. As it's passed as a inline function, it
      will be rendered immediately once done
    </p>
    <h3>Transforming an array</h3>
    <p>*</p>
  </body>
</html>
